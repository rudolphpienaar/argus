{
  "name": "FedML Smoke",
  "username": "oracle",
  "steps": [
    {
      "send": "OK, do you have power scripts?",
      "success": true,
      "output_contains": [
        "hist-harmonize",
        "type `/scripts` anytime"
      ]
    },
    {
      "send": "I want to run some power scripts",
      "success": true,
      "output_contains": "hist-harmonize"
    },
    {
      "send": "what scripts do you have?",
      "success": true,
      "output_contains": "hist-harmonize"
    },
    {
      "send": "/scripts hist-harmonize",
      "success": true,
      "output_contains": "[s4_rename] rename"
    },
    {
      "send": "/run hist-harmoniize",
      "success": false,
      "output_contains": [
        "DID YOU MEAN",
        "hist-harmonize"
      ]
    },
    {
      "send": "Can you run the hist-harmonize for me?",
      "success": true,
      "output_contains": [
        "RUNNING SCRIPT: hist-harmonize",
        "SCRIPT COMPLETE",
        "[OK] [5/5] s5_harmonize :: harmonize"
      ],
      "capture_project": true
    },
    {
      "vfs_exists": "/home/${user}/searches/latest.txt"
    },
    {
      "vfs_exists": "${session}/gather/data/gather.json"
    },
    {
      "vfs_exists": "${session}/gather/harmonize/data/harmonize.json"
    },
    {
      "send": "proceed",
      "success": true
    },
    {
      "vfs_exists": "${session}/gather/harmonize/code/data/code.json"
    },
    {
      "send": "cd /home/${user}/projects/${project}/src",
      "success": true
    },
    {
      "send": "python train.py",
      "success": true,
      "output_contains": "LOCAL TRAINING COMPLETE"
    },
    {
      "vfs_exists": "${session}/gather/harmonize/code/train/data/train.json"
    },
    {
      "send": "federate",
      "success": true,
      "output_contains": "Ready for STEP 1/5"
    },
    {
      "send": "federate --yes",
      "success": true,
      "output_contains": "STEP 1/5 COMPLETE: SOURCE CODE TRANSCOMPILE"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/data/node.py"
    },
    {
      "send": "federate --yes",
      "success": true,
      "output_contains": "STEP 2/5 COMPLETE: CONTAINER COMPILATION"
    },
    {
      "send": "federate --name histo-exp1-federated",
      "success": true,
      "output_contains": "STEP 3/5 ACTIVE: MARKETPLACE PUBLISH PREPARATION"
    },
    {
      "send": "federate --yes",
      "success": true,
      "output_contains": "STEP 4/5 COMPLETE: MARKETPLACE PUBLISH"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/containerize/marketplace-publish/data/publish-receipt.json"
    },
    {
      "send": "federate --yes",
      "success": true,
      "output_contains": "DISPATCH COMPLETE"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/containerize/marketplace-publish/dispatch/federated-rounds/data/round-05.json"
    },
    {
      "vfs_exists": "${session}/gather/harmonize/code/train/federate-brief/data/federate-brief.json"
    },
    {
      "send": "next?",
      "success": true,
      "output_contains": "federate --rerun"
    },
    {
      "send": "federate --yes",
      "success": true,
      "output_contains": "FEDERATION ALREADY COMPLETED"
    }
  ]
}
