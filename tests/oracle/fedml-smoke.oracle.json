{
  "name": "FedML Smoke",
  "username": "oracle",
  "steps": [
    {
      "send": "OK, do you have power scripts?",
      "success": true,
      "output_contains": [
        "hist-harmonize",
        "type `/scripts` anytime"
      ]
    },
    {
      "send": "I want to run some power scripts",
      "success": true,
      "output_contains": "hist-harmonize"
    },
    {
      "send": "what scripts do you have?",
      "success": true,
      "output_contains": "hist-harmonize"
    },
    {
      "send": "/scripts hist-harmonize",
      "success": true,
      "output_contains": "[s4_rename] rename"
    },
    {
      "send": "/run hist-harmoniize",
      "success": false,
      "output_contains": [
        "DID YOU MEAN",
        "hist-harmonize"
      ]
    },
    {
      "send": "Can you run the hist-harmonize for me?",
      "success": true,
      "output_contains": [
        "RUNNING SCRIPT: hist-harmonize",
        "SCRIPT COMPLETE",
        "[OK] [5/5] s5_harmonize :: harmonize"
      ],
      "capture_project": true
    },
    {
      "vfs_exists": "${session}/search/data/search.json"
    },
    {
      "vfs_exists": "${session}/search/gather/data/gather.json"
    },
    {
      "vfs_exists": "${session}/search/gather/harmonize/data/harmonize.json"
    },
    {
      "send": "proceed",
      "success": true
    },
    {
      "vfs_exists": "${session}/search/gather/harmonize/code/data/code.json"
    },
    {
      "send": "cd /home/${user}/projects/${project}/src",
      "success": true
    },
    {
      "send": "python train.py",
      "success": true,
      "output_contains": "LOCAL TRAINING COMPLETE"
    },
    {
      "vfs_exists": "${session}/search/gather/harmonize/code/train/data/train.json"
    },
    {
      "send": "federate",
      "success": true,
      "output_contains": "FEDERATION BRIEFING"
    },
    {
      "send": "approve",
      "success": true,
      "output_contains": "FLOWER TRANSCOMPILATION"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/data/node.py"
    },
    {
      "send": "approve",
      "success": true,
      "output_contains": "CONTAINER BUILD"
    },
    {
      "send": "config name histo-exp1-federated",
      "success": true,
      "output_contains": "PUBLISH METADATA UPDATED"
    },
    {
      "send": "approve",
      "success": true,
      "output_contains": "PUBLICATION CONFIGURATION CONFIRMED"
    },
    {
      "send": "approve",
      "success": true,
      "output_contains": "REGISTRY PUBLICATION"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/containerize/marketplace-publish/data/publish-receipt.json"
    },
    {
      "send": "dispatch",
      "success": true,
      "output_contains": "FEDERATION DISPATCH"
    },
    {
      "vfs_exists": "/home/${user}/projects/${project}/src/source-crosscompile/containerize/marketplace-publish/dispatch/federated-rounds/data/round-05.json"
    },
    {
      "send": "publish model",
      "success": true,
      "output_contains": "MODEL PUBLICATION"
    },
    {
      "vfs_exists": "${session}/search/gather/harmonize/code/train/federate-brief/data/briefing.json"
    },
    {
      "send": "next?",
      "success": true,
      "output_contains": "federate --rerun"
    },
    {
      "send": "federate",
      "success": true,
      "output_contains": "FEDERATION ALREADY COMPLETED"
    }
  ]
}
