= ARGUS LCARS Interface Design
:toc:
:icons: font

This document captures the specific interaction and visual metaphors used in the ARGUS (ATLAS Resource Graphical User System) LCARS interface.

== The Intelligence Console (Terminal)

The terminal is the primary command and control hub for ARGUS. It functions as a "Unified Intelligence Console" where standard system commands (bash-like), natural language queries (LCARSLM), and agentic UI manipulations are integrated into a single stream.

=== Visual Metaphor: The Tactical Drawer

The terminal is conceptually positioned **between** the Status Header (top panel) and the Operational Workspace (bottom panel). It is designed as a "retractable drawer" that unfurls from behind the main workspace.

.Key Design Principles:
* **Framework Integration**: The terminal is powered by the `LCARSTerminal` component from the `lcars-framework`. It is decoupled from application logic, using a command-registration API.
* **Frameless Integration**: To avoid visual clutter, the terminal does not have its own left-side LCARS framing. Instead, it sits flush against the primary `left-frame` (sidebar), which acts as a "rail" for the drawer.
* **The Workspace Lid**: The horizontal `bar-panel` (containing bars 6-10) functions as the physical "lid" of the bottom panel.
* **Retraction Logic**:
  - **Closed**: The lid sits at the top of the right-frame; the terminal is hidden (height: 0).
  - **Open**: The lid slides downward, revealing the terminal screen above it.
* **Dynamic Elbows**: The LCARS corner elbows are attached to the sliding "lid" rather than the frame, ensuring a flush join at any deployment height. These elbows have a high z-index (300) to sit above overlays like the Marketplace.

=== Interaction Metaphor: The Pullable Access Strip

The primary method for adjusting the terminal's height is the **Access Strip**.

* **The Handle**: A horizontal orange bar (`october-sunset`) floating 5px above the workspace lid.
* **Draggable Workspace**: By "grabbing" this handle, the user physically pulls the entire workspace down, increasing the terminal's visibility. The height limit has been removed to allow full-screen console expansion.
* **Visual Feedback**: The handle glows when active, providing tactile confirmation.
* **Integrated Toggles**:
  - **Tactical Close**: A glowing `mars` red pill at the top-right of the terminal header for quick retraction.
  - **Primary Toggle**: The leftmost orange bar (`bar-6`) of the workstation lid acts as a large-target toggle switch.

== Operational Modes

The terminal dynamically adapts its persona and capabilities based on the active SeaGaP stage.

=== Search Mode (AI Core)
During the Search stage, the terminal acts as an AI-driven discovery engine.
* **Prompt**: `ARGUS: SEARCH >`
* **Agentic Logic**: The AI can automatically select datasets in the visual grid using the `[SELECT: ID]` intent parser.
* **Telematic Readout**: The visual grid below the terminal serves as a secondary evidence display, updating in real-time as the AI identifies relevant cohorts.

=== Developer Mode (Technical Shell)
Upon entering the Process stage, the console transitions into a technical coding environment.
* **Prompt**: `dev@argus:~/src/project $`
* **Styling**: The UI automatically switches to a monospaced font (**Inconsolata**), clears history, and enables mixed-case input/output for technical accuracy.
* **Commands**: Supports standard linux-style commands (`ls`, `cd`, `pwd`, `mkdir`, `rm`, `python`).

== Typography: The Dual-Voice System

ARGUS uses the **Antonio** font family with a selective casing strategy:

* **The System Voice (Uppercase)**: All structural elements, headers, prompts, and button labels are strictly uppercase.
* **The Data Voice (Mixed Case)**: Terminal output (AI responses, file contents) and user input allow mixed case to preserve technical precision and improve readability.
* **Visual Polish**: Terminal readouts feature a soft text-shadow glow, simulating a high-density CRT display.

== LCARS Component System

ARGUS is built on a reusable **LCARS Framework** (`src/lcars-framework/`) that decouples data simulation from UI rendering.

=== Telemetry Service
The telemetry system uses a provider-renderer pattern:
* **Generators**: Pure logic classes (e.g., `ProcessGenerator`, `NetworkGenerator`) that produce data objects.
* **Renderers**: Visual components (e.g., `ListRenderer`, `LogRenderer`) that take data and update the DOM.
* **Service**: A central orchestrator that manages registration and the 800ms "flicker" update loop.

=== Workflow Tracker
The `WorkflowTracker` procedurally generates linear pipelines (like SeaGaP) with:
* **Stations**: Circular "stops" with associated labels and status classes (`active`, `visited`).
* **Connectors**: Dynamic line segments between stops.
* **Integrated Telemetry**: Each station includes a "hanging" telemetry window that populates via the `TelemetryService`.

=== Architecture

The system consists of two parts:

1. **TypeScript Generator** (`src/ui/components/LCARSFrame.ts`)
   - Creates DOM structures for LCARS frames
   - Handles panel configuration and layout
   - Exposes utility functions to window for HTML event handlers

2. **CSS Design System** (`dist/css/lcars-components.css`)
   - Defines base styles using CSS custom properties
   - Computes color shades via HSL
   - Handles responsive breakpoints

=== The Hue-Based Color System

All LCARS component colors derive from a single `--lcars-hue` value (0-360). The CSS automatically computes four shade variants:

[source,css]
----
.lcars-frame {
    --lcars-hue: 200;           /* Blue family */
    --lcars-sat: 70%;
    --lcars-light-1: 75%;       /* Lightest */
    --lcars-light-2: 65%;
    --lcars-light-3: 55%;
    --lcars-light-4: 45%;       /* Darkest */

    /* Computed shades */
    --lcars-shade-1: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-1));
    --lcars-shade-2: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-2));
    /* ... */
}
----

.Predefined Hue Values
[cols="1,1,2"]
|===
|Name |Hue |Usage

|BLUE/SKY |200 |Default marketplace assets
|ORANGE |30 |Main application frame
|GREEN/FDA |140 |FDA regulatory tools
|PURPLE/NEBULA |270 |Special categories
|RED/MARS |0 |Alerts, warnings
|GOLD |45 |Highlights
|===

=== LCARS Frame Structure

A complete LCARS frame consists of four grid areas:

----
╭━━━━━━━━━━╮━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┃  ELBOW   ┃  TOP BAR (title + actions)
┣━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┃ PANEL 1  ┃
┃──────────┃  CONTENT AREA
┃ PANEL 2  ┃  (scrollable)
┃──────────┃
┃ PANEL 3  ┃
┃ [spacer] ┃
┃ PANEL N  ┃  ← corner radius
╰━━━━━━━━━━╯─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
----

* **Elbow**: Curved corner piece connecting top bar to sidebar
* **Top Bar**: Horizontal header with title, metadata, and action buttons
* **Sidebar**: Vertical stack of navigation panels (same width, varying heights/shades)
* **Content**: Main scrollable content area

=== Panel Design Principles

LCARS panels follow strict design rules:

1. **Uniform Width**: All sidebar panels are the same width. Visual variety comes from color and height, not width.
2. **Shade Cycling**: Panels alternate through shade variants (1-4) for visual rhythm
3. **Height Variants**: Panels can have different heights (`tall`, `medium`, `short`)
4. **Corner Radii**: Only the elbow (top-left) and bottom panel (bottom-left) have rounded corners
5. **Text Alignment**: Panel labels align right (LCARS convention for left sidebars)
6. **Spacer Element**: A colored spacer fills remaining height between panels and the bottom corner

=== Usage Example

**HTML Structure:**
[source,html]
----
<div class="lcars-frame" style="--lcars-hue: 200;">
    <div class="lcars-elbow"></div>
    <div class="lcars-top-bar">
        <h1>Title</h1>
        <button class="close-btn">CLOSE</button>
    </div>
    <div class="lcars-sidebar">
        <a class="lcars-panel" data-shade="1" data-height="tall">SECTION 1</a>
        <a class="lcars-panel" data-shade="2">SECTION 2</a>
        <a class="lcars-panel" data-shade="3">SECTION 3</a>
        <div class="lcars-sidebar-spacer" data-shade="4"></div>
        <a class="lcars-panel lcars-corner-bl" data-shade="1">SECTION N</a>
    </div>
    <div class="lcars-content">
        <!-- Scrollable content -->
    </div>
</div>
----

**Dynamic Theming (TypeScript):**
[source,typescript]
----
// Change color scheme at runtime
const frame = document.getElementById('my-lcars-frame');
frame.style.setProperty('--lcars-hue', '140');  // Switch to green
----

=== Marketplace Integration

The Asset Detail Overlay demonstrates the "Floating Command Module" pattern, where critical actions are decoupled from the information display to maximize screen real estate and mimic hardware controls.

==== Visual Style: PADD Aesthetic
The asset tiles and detail frames use an asymmetrical "PADD" (Personal Access Display Device) geometry:
* **Thick Top Bar:** 10px solid accent bar (Sky Blue or FDA Green).
* **Rounded Corner:** Bottom-right corner has a 24px radius (`border-radius: 0 0 24px 0`), creating a distinct physical shape.
* **No Borders:** Replaced thin outlines with deep contrast backgrounds and shadow glows.

==== Floating Command Pills
Action buttons are removed from the internal content area and placed in a dedicated **Command Column** to the right of the main panel.

* **Structure:**
  [source,html]
  ----
  <div class="detail-layout">
      <!-- Main Information Display -->
      <div class="detail-panel">...</div>

      <!-- Floating Command Column -->
      <div class="detail-command-column">
          <button class="pill-btn close-pill">CLOSE</button>
          <button class="pill-btn install-pill">INSTALL</button>
      </div>
  </div>
  ----
* **Dynamic Coloring:** The INSTALL pill automatically inherits the asset's hue (Blue vs. FDA Green) via CSS variables.
* **Status Feedback:** The INSTALL pill contains a progress bar overlay and status text (`READY` -> `INSTALLING` -> `INSTALLED`).

==== Color Coding
* **Standard Assets:** `--lcars-hue: 200` (Sky Blue)
* **FDA Regulatory Tools:** `--lcars-hue: 140` (Green)
* **Close Actions:** `var(--mars)` (Red)

[source,typescript]
----
// In marketplace/view.ts
const hue = asset.type === 'fda' ? 140 : 200;
lcarsFrame.style.setProperty('--lcars-hue', String(hue));
----

== Implementation Details

* **Global Component**: The `LCARSTerminal` is a global singleton.
* **Intent Parsing**: The `terminal_handleCommand` function intercepts LLM responses to trigger system actions (selecting data, transitioning stages).
* **Contextual Awareness**: The AI engine receives the full dataset catalog and the user's current "Selection Buffer" with every query, ensuring high-fidelity RAG (Retrieval Augmented Generation) reasoning.
* **LCARS Frame Generator**: The `lcarsFrame_create()` function and related utilities are exposed on the `window` object for use in HTML event handlers.