/* ============================================================ */
/* LCARS COMPONENT SYSTEM                                       */
/* Procedural LCARS UI components with HSL-based color theming  */
/* ============================================================ */

/*
 * Usage:
 *   Set --lcars-hue on any .lcars-frame to change the color scheme:
 *     --lcars-hue: 200  = Blue (sky)
 *     --lcars-hue: 30   = Orange (default LCARS)
 *     --lcars-hue: 140  = Green (FDA)
 *     --lcars-hue: 270  = Purple (nebula)
 *
 *   Shades are computed automatically via HSL:
 *     shade-1: lightest (high lightness)
 *     shade-2: medium-light
 *     shade-3: medium-dark
 *     shade-4: darkest (low lightness)
 */

/* ============================================================ */
/* CSS CUSTOM PROPERTIES - DEFAULTS                             */
/* ============================================================ */

.lcars-frame {
    /* Base hue - override this to change color scheme */
    --lcars-hue: 200;

    /* Saturation and lightness for shade variants */
    --lcars-sat: 85%;
    --lcars-light-1: 75%;   /* lightest */
    --lcars-light-2: 60%;   /* standard */
    --lcars-light-3: 50%;
    --lcars-light-4: 35%;   /* darkest */

    /* Computed shade colors */
    --lcars-shade-1: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-1));
    --lcars-shade-2: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-2));
    --lcars-shade-3: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-3));
    --lcars-shade-4: hsl(var(--lcars-hue), var(--lcars-sat), var(--lcars-light-4));

    /* Layout dimensions */
    --lcars-elbow-size: 30px;
    --lcars-gap: 0.4rem;
    --lcars-sidebar-width: 140px;
    --lcars-top-bar-height: 50px;
    --lcars-radius: 30px;

    /* Text colors */
    --lcars-text: #000;
    --lcars-text-muted: rgba(0, 0, 0, 0.7);
}

/* ============================================================ */
/* LCARS FRAME - GRID LAYOUT                                    */
/* ============================================================ */
/*
 *   ╭━━━━━━━━━━╮━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 *   ┃  ELBOW   ┃  TOP BAR
 *   ┣━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 *   ┃ PANEL 1  ┃
 *   ┃────────  ┃  CONTENT AREA
 *   ┃ PANEL 2  ┃  (narrower)
 *   ┃──────────┃  (scrollable)
 *   ┃ PANEL 3  ┃
 *   ╰━━━━━━━━━━╯─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
 */

.lcars-frame {
    display: grid;
    grid-template-columns: var(--lcars-sidebar-width) 1fr;
    grid-template-rows: auto 1fr;
    grid-template-areas:
        "elbow  topbar"
        "sidebar content";
    gap: var(--lcars-gap);
    min-height: 100%;  /* Fill container height */
    height: 100%;
    background: #000;  /* gaps show as black */
    border-radius: var(--lcars-radius); /* Clip corners for PADD look */
    overflow: hidden;
}

/* ============================================================ */
/* LCARS ELBOW - Curved corner piece                            */
/* ============================================================ */

.lcars-elbow {
    grid-area: elbow;
    background: var(--lcars-shade-2);
    border-radius: var(--lcars-radius) 0 0 0;
    min-height: var(--lcars-top-bar-height);
    position: relative;
}

/* ============================================================ */
/* LCARS TOP BAR                                                */
/* ============================================================ */

.lcars-top-bar {
    grid-area: topbar;
    background: var(--lcars-shade-2);
    min-height: var(--lcars-top-bar-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1.5rem;
    gap: 1rem;
    border-radius: 0 var(--lcars-radius) 0 0; /* Top-right rounded */
}

/* Title block inside top bar */
.lcars-top-bar .detail-title-block {
    flex: 1;
    min-width: 0;
}

.lcars-top-bar .detail-title-block h1 {
    margin: 0;
    font-family: 'Antonio', sans-serif;
    font-size: 1.3rem;
    color: var(--lcars-text);
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.lcars-top-bar .detail-subtitle {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 0.15rem;
    flex-wrap: wrap;
}

.lcars-top-bar .detail-subtitle .badge {
    font-size: 0.6rem;
    padding: 2px 6px;
    border-radius: 3px;
    background: rgba(0, 0, 0, 0.15);
    color: var(--lcars-text);
    border: 1px solid rgba(0, 0, 0, 0.25);
    font-weight: bold;
    text-transform: uppercase;
}

.lcars-top-bar .detail-subtitle span {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.7rem;
    color: var(--lcars-text-muted);
}

.lcars-top-bar .detail-stars {
    font-weight: bold;
}

.lcars-top-bar .detail-author {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.65rem;
    color: var(--lcars-text-muted);
}

/* Actions in top bar */
.lcars-top-bar .detail-actions {
    display: none; /* Deprecated: Actions moved to content body */
}

/* ============================================================ */
/* LCARS SIDEBAR - Vertical panel stack                         */
/* ============================================================ */

.lcars-sidebar {
    grid-area: sidebar;
    display: flex;
    flex-direction: column;
    gap: var(--lcars-gap);
    /* Ensure sidebar fills full height */
    min-height: 0;  /* Allow shrinking in grid */
}

/* ============================================================ */
/* LCARS PANEL - Individual sidebar panel                       */
/* ============================================================ */

.lcars-panel {
    display: flex;
    align-items: center;
    justify-content: flex-end;  /* Text aligns right (LCARS style) */
    padding: 0.6rem 0.8rem;
    font-family: 'Antonio', sans-serif;
    font-size: 0.8rem;
    font-weight: bold;
    color: var(--lcars-text);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: filter 0.15s ease;
    text-align: right;
    min-height: 36px;
}

/* Shade variants based on data attribute */
.lcars-panel[data-shade="1"] { background: var(--lcars-shade-1); }
.lcars-panel[data-shade="2"] { background: var(--lcars-shade-2); }
.lcars-panel[data-shade="3"] { background: var(--lcars-shade-3); }
.lcars-panel[data-shade="4"] { background: var(--lcars-shade-4); }

/* Height variants for visual rhythm */
.lcars-panel[data-height="tall"]   { min-height: 50px; }
.lcars-panel[data-height="medium"] { min-height: 40px; }
.lcars-panel[data-height="short"]  { min-height: 32px; }

/* Corner variants */
.lcars-panel.lcars-corner-tl {
    border-radius: 0;  /* elbow handles the top-left curve */
}

.lcars-panel.lcars-corner-bl {
    border-radius: 0 0 0 var(--lcars-radius);
}

/* Sidebar spacer - fills remaining height between panels */
.lcars-sidebar-spacer {
    flex: 1;
    min-height: 30px;
    width: 100%;  /* Full width to maintain solid left edge */
}

/* Shade variants for spacer */
.lcars-sidebar-spacer[data-shade="1"] { background: var(--lcars-shade-1); }
.lcars-sidebar-spacer[data-shade="2"] { background: var(--lcars-shade-2); }
.lcars-sidebar-spacer[data-shade="3"] { background: var(--lcars-shade-3); }
.lcars-sidebar-spacer[data-shade="4"] { background: var(--lcars-shade-4); }

/* Hover state */
.lcars-panel:hover {
    filter: brightness(1.1);
}

/* Active panel indicator */
.lcars-panel.active {
    filter: brightness(1.15);
    position: relative;
}

.lcars-panel.active::after {
    content: '▸';
    position: absolute;
    left: 0.5rem;
    color: var(--lcars-text);
}

/* ============================================================ */
/* LCARS CONTENT AREA                                           */
/* ============================================================ */

.lcars-content {
    grid-area: content;
    background: #0a0a0a;
    padding: 1.5rem 2rem;
    overflow-y: auto;
    /* No max-height - fills available grid space */
    border-radius: 0 0 var(--lcars-radius) 0; /* Bottom-right rounded */
}

/* Section styling inside content */
.lcars-content .detail-section {
    margin-bottom: 1.5rem;
    padding-bottom: 1.25rem;
    border-bottom: 1px solid #222;
}

.lcars-content .detail-section:last-child {
    margin-bottom: 0;
    border-bottom: none;
    padding-bottom: 0;
}

.lcars-content .detail-section h2 {
    font-family: 'Antonio', sans-serif;
    font-size: 0.85rem;
    color: hsl(var(--lcars-hue), var(--lcars-sat), 60%);
    margin: 0 0 0.75rem 0;
    letter-spacing: 1px;
    padding-left: 0.6rem;
    border-left: 3px solid hsl(var(--lcars-hue), var(--lcars-sat), 60%);
}

.lcars-content .detail-section p {
    font-size: 0.85rem;
    color: #aaa;
    line-height: 1.5;
    margin: 0;
}

/* Code block styling */
.lcars-content .code-block {
    background: #111;
    border-left: 3px solid hsl(var(--lcars-hue), var(--lcars-sat), 60%);
    padding: 0.75rem 1rem;
    border-radius: 0 4px 4px 0;
    overflow-x: auto;
}

.lcars-content .code-block code {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.8rem;
    color: hsl(var(--lcars-hue), var(--lcars-sat), 70%);
    display: block;
    white-space: pre;
    line-height: 1.5;
}

/* Spec grid */
.lcars-content .spec-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
}

.lcars-content .spec-item {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.lcars-content .spec-label {
    font-family: 'Antonio', sans-serif;
    font-size: 0.65rem;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.lcars-content .spec-value {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.85rem;
    color: #ddd;
}

/* Dependencies list */
.lcars-content .dep-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
}

.lcars-content .dep-list li {
    background: #181818;
    border: 1px solid #333;
    padding: 0.3rem 0.6rem;
    border-radius: 3px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.75rem;
    color: #aaa;
}

/* Changelog */
.lcars-content .changelog {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.lcars-content .changelog-entry {
    display: grid;
    grid-template-columns: 80px 90px 1fr;
    gap: 0.75rem;
    padding: 0.4rem 0;
    border-bottom: 1px solid #222;
}

.lcars-content .changelog-entry:last-child {
    border-bottom: none;
}

.lcars-content .cl-version {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.8rem;
    color: hsl(var(--lcars-hue), var(--lcars-sat), 65%);
    font-weight: bold;
}

.lcars-content .cl-date {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.75rem;
    color: #666;
}

.lcars-content .cl-notes {
    font-size: 0.8rem;
    color: #aaa;
}

/* Related assets */
.lcars-content .related-assets {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.lcars-content .related-card {
    background: #111;
    border: 1px solid #333;
    border-top: 3px solid hsl(var(--lcars-hue), var(--lcars-sat), 60%);
    padding: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 160px;
    flex: 1;
    max-width: 200px;
}

.lcars-content .related-card:hover {
    border-color: hsl(var(--lcars-hue), var(--lcars-sat), 60%);
    background: #181818;
}

.lcars-content .related-card .related-name {
    font-family: 'Antonio', sans-serif;
    font-size: 0.85rem;
    color: #eee;
    margin-bottom: 0.2rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.lcars-content .related-card .related-type {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.65rem;
    color: #666;
    text-transform: uppercase;
}

/* ============================================================ */
/* SEGMENTED TOP BAR (Optional)                                 */
/* ============================================================ */

.lcars-top-bar-segmented {
    display: flex;
    gap: var(--lcars-gap);
    min-height: var(--lcars-top-bar-height);
}

.lcars-bar-segment {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 1rem;
    font-family: 'Antonio', sans-serif;
    font-weight: bold;
    color: var(--lcars-text);
}

.lcars-bar-segment[data-shade="1"] { background: var(--lcars-shade-1); }
.lcars-bar-segment[data-shade="2"] { background: var(--lcars-shade-2); }
.lcars-bar-segment[data-shade="3"] { background: var(--lcars-shade-3); }
.lcars-bar-segment[data-shade="4"] { background: var(--lcars-shade-4); }

/* ============================================================ */
/* RESPONSIVE ADJUSTMENTS                                       */
/* ============================================================ */

@media (max-width: 800px) {
    .lcars-frame {
        --lcars-sidebar-width: 100px;
        --lcars-top-bar-height: 45px;
        --lcars-radius: 20px;
    }

    .lcars-panel {
        font-size: 0.7rem;
        padding: 0.5rem 0.6rem;
        min-height: 30px;
    }

    .lcars-top-bar .detail-title-block h1 {
        font-size: 1.1rem;
    }

    .lcars-content {
        padding: 1rem;
    }

    .lcars-content .spec-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .lcars-frame {
        --lcars-sidebar-width: 80px;
        --lcars-top-bar-height: 40px;
    }

    .lcars-panel {
        font-size: 0.6rem;
    }

    .lcars-content .spec-grid {
        grid-template-columns: 1fr;
    }

    .lcars-content .changelog-entry {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }
}
